# ProjectGZip

Сжатие файла
Создается экземпляр класса FileStream для потоковой работы с файлом. 
В одном потоке происходит чтение блоков из потока размером 4Мб. Данный блок записывается в очередь readerQueue. В методе Compress вытаскиваются блоки из очереди и происходит сжатие, одновременно в нескольких потоках(количество одновременно запущенных потоков Thread = Environment.ProcessorCount;)
В методе CompressStreamParall происходит сжатие блоков с помощью GZStream. Сжатый блок записывается в в другую очередь (writerQueue). В методе Write происходит запись из из очереди writerQueue в итоговый файл, перед этим также записывается в файл ID текущего кусочка и размер,который соответствует сжатому блоку.
Такой алгоритм будет продолжаться, пока не будут прочитаны все байты из потока FileStream.


Восстановление файла
Создается экземпляр класса FileStream для потоковой работы с файлом. 
Сначала считываются 4 байта, которые содержат информацию об ID текущего кусочка, затем 4 байта, которые содержат информацию  о размере сжатого блока. Узнав размер блока, происходит чтение данного блока. Такая операция проводится для всех блоков файла-источника. Каждый блок записывается в очередь readerQueue. В Decompress cоздается MemoryStream на основе блока. Затем через GZStream происходит восстановление блока. Результат записывается в dictionary, где также имеется информация об ID кусочка. Также количество одновременно запущенных потоков Thread = Environment.ProcessorCount;
Происходит запись из dictionary в итоговый файл.
Такой алгоритм будет продолжаться, пока не будут прочитаны все байты из потока FileStream.
